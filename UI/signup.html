<!DOCTYPE html>
<html>
<head>
    <!--Required Meta Tags-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!--Bootstrap CSS-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css" integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz" crossorigin="anonymous">
    <!--Javascripts: Jquery & BootstrapJS-->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <title>NutriAid</title>
    <style>
       .vertical-separator{
           width: 2px;
           background-color: hsl(184, 100%, 60%);
           height: inherit;
           margin-left: 10px;
           margin-right: 10px;
       }

   
   
.slider {
  -webkit-appearance: none;
  width: 100%;
  height: 20px;
  background: #d3d3d3;
  outline: none;
  opacity: 0.7;
  -webkit-transition: .2s;
  transition: opacity .2s;
}

.slider:hover {
  opacity: 1;
}

.slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 20px;
  height: 20px;
  border-width: 1px;
  border-color:  #7F152E;
  background: #A10115 ;
  cursor: pointer;
}

.slider::-moz-range-thumb {
    width: 20px;
  height: 20px;
  border-width: 1px;
  border-color:  #7F152E;
  background: #A10115 ;
  cursor: pointer;
}
label{
    color:#A10115;
    font-weight:bold;
}
.navbar a.active {
  border-top: solid 3px;
  border-bottom: solid 3px;
  border-color:#A10115;
  
  color:white;
 
}
.nav-item{
    padding:8px 15px;
}

.navbar a:hover {
    border-top: solid 3px;
  border-bottom: solid 3px;
  border-color: #F0EFEA ;

  color:white;
}
body{
    background-color:lightgray;
}

#alertMessage{
  color: red;
  

}
.carousel-inner{
            width:375px;
            height:600px;
        }
  #carousel-footer{
    font-family:Verdana, Geneva, Tahoma, sans-serif;
    color: #A10115;
    
 
  };
 
    </style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
<script type="text/javascript">
  $('.carousel').carousel('cycle',{
      interval: 1000
  });
  var url1 = "http://localhost:5000";
  $(document).ready(function(){

      $.ajax({
          url: url1,
          type: 'get',
          dataType: 'json',
          success: function (data) {
              console.log(data);


          }
      });

  });
</script>
    <script type="text/javascript">
      function signup() 
      {
        const data = {
          'name' : document.getElementById('nameInput').value,
          'email' : document.getElementById('emailInput').value,
          'password' : document.getElementById('passwordInput').value
        }
        $.ajax({
          url: "http://localhost:3001/signup",
          type: 'POST',
          contentType: 'application/json',
          data: JSON.stringify(data),
          success: function(response){
            const data = JSON.parse(response);
            if(data.authenticated == 'true')
                //alert('Success');
                window.location = "index.html";
            else if(data.authenticated == 'emailError')
               {
                 document.getElementById('alertMessage').innerHTML = "Account With Email Already Exists." ;
            //     document.getElementById('alertMessage').outerHTML = <a href="signin.html" ><center>Sign In?</center></a>;
    
               }

            
        }})

        //Following is for reference
        $.ajax({
          url: "http://localhost:3001/data",
          type: 'GET',
          contentType: 'application/json',
          success: function(response){
            console.log(response);
        }})
      }
    </script>
</head>

<body>
    <center><img src="images/logo.png" width="75" height="75" alt="Nutri-aid food recommender" style="margin-top:10px; margin-bottom:10px"></center>
    <div >      
        <div class="container  h-60 w-80 m-auto p-2" >
            <div class ="row" style="margin-top: 20px;">
                <div class="col-lg-6 col-md-7 col-sm-3" >
                  <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
                     
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <img class="d-block w-60" src="images/raspberry.jpg"  alt="fruit diet, raspberry">
                                <footer id="carousel-footer"><center>Get Nutritious Recommendations</center></footer>
                            </div>
                            <div class="carousel-item">
                                <img class="d-block w-60" src="images/cereal.jpg" alt="carbohydrate lover diet">
                                <footer id="carousel-footer"><center>Store Food Preferences</center></footer>
                            </div>
                            <div class="carousel-item">
                                <img class="d-block w-60" src="images/haribo.jpg" alt="diabetic? no sugar?">
                                <footer id="carousel-footer"><center>Save Favorite Foods</center></footer>
                            </div>
                        </div>
                    </div>    
                </div>
          <div class="col-lg-6 col-md-5 col-sm-3 form-group" style="margin-top: 10px; margin-left:0px">
            
               <form  id="surveyForm" action="javascript:signup();"> 
                      <span  style="font-family:Verdana, Geneva, Tahoma, sans-serif; color: #A10115;">Name </span><br>
                      <input type="text" id="nameInput" size="35" required style="margin-top:10px"> <br><br>
                     
                      <span style="font-family:Verdana, Geneva, Tahoma, sans-serif; color: #A10115;">Email </span><br>
                      <input type="email" id="emailInput" size="35" required oninput="document.getElementById('alertMessage').innerHTML=''" style="margin-top:10px"><br><br>
                      
                      <span  style="font-family:Verdana, Geneva, Tahoma, sans-serif; color: #A10115;">Password </span><br>                     
                      <input type="password" id="passwordInput" size="35"required oninput="checkPassword()" style="margin-top:10px" onfocus="document.getElementById('password_constraints').style.setProperty('display', 'block')" onblur="document.getElementById('password_constraints').style.setProperty('display', 'none')"><br><br>
                     
                      <div style="margin-left:50px; border-radius: 10px; border: solid 2px; border-color: #138d75; background-color: white; padding:10px; position: absolute; width: 335px; display:none" id="password_constraints">
                        
                          <p>Strength: <progress id="security-value" max="6" value="0" > </progress><span id="security-message"></span> <br>                         
                            <span  style="font-family:Verdana, Geneva, Tahoma, sans-serif; color: #138d75; font-size: small;" >Must Be Atleast 8 Characters<span style="font-family:Verdana, Geneva, Tahoma, sans-serif; color: #138d75; font-size: small;" id="lengthConstraint" ></span></span><br> 
                          <span  style="font-family:Verdana, Geneva, Tahoma, sans-serif; color: #138d75; font-size: small;" >Must Contain 1 Uppercase Letter <span  style="font-family:Verdana, Geneva, Tahoma, sans-serif; color: #138d75; font-size: small;" id="uppercaseConstraint"></span></span> <br> 
                          <span  style="font-family:Verdana, Geneva, Tahoma, sans-serif; color: #138d75; font-size: small;" >Must Contain 1 Lowercase Letter <span  style="font-family:Verdana, Geneva, Tahoma, sans-serif; color: #138d75; font-size: small;" id="lowercaseConstraint"></span></span><br>  
                          <span  style="font-family:Verdana, Geneva, Tahoma, sans-serif; color: #138d75; font-size: small;">Must Contain 1 Number <span style="font-family:Verdana, Geneva, Tahoma, sans-serif; color: #138d75; font-size: small;" id="numberConstraint" </span></span><br> 
                          <span  style="font-family:Verdana, Geneva, Tahoma, sans-serif; color: #138d75; font-size: small;">Must Only Use A-z, 0-9, @, -, _, and .  <span  style="font-family:Verdana, Geneva, Tahoma, sans-serif; color: #138d75; font-size: small;" id="characterConstraint"></span></span><br> 
                          <span  style="font-family:Verdana, Geneva, Tahoma, sans-serif; color: #138d75; font-size: small;">Must Not Be Same As Email<span  style="font-family:Verdana, Geneva, Tahoma, sans-serif; color: #138d75; font-size: small;" id="emailConstraint"></span><br> 
      
                                      </div>
                              
                      <span style="font-family:Verdana, Geneva, Tahoma, sans-serif; color: #A10115;">Confirm Password </span><br>
                      <input type="password" id="confirmPasswordInput" size="35" required style="margin-top:10px"  oninput="confirmPassword()"> <br><br>
                      <p id="matchPassword" style="margin-left:15%"></p>

                      <button type="submit" id="submitbutton" class="btn" style="background-color: #138d75 ;color:white ; border-color:#A10115; margin-left: 25%; " >Sign Up</button>  
                      
                      <p id="alertMessage" style="margin-left:9%"></p>
                      <p style="margin-left:6%">Already Have an Account?<a href="signin.html"> SignIn Here</a></p>
                    </form>
          </div> 
        </div>
        
          </div>
              
            </div>
          
           
        
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
<script>
function checkPassword(){
  var password = document.getElementById("passwordInput").value;
  var email = document.getElementById('emailInput').value;
  var secure = 0;
  if(password.length>=8)
  {
    document.getElementById('lengthConstraint').innerHTML = ' &#10004';
    secure++;
  }
  else
  {
    document.getElementById('lengthConstraint').innerHTML = '';
  }
  if(password!=email)
  {
    document.getElementById('emailConstraint').innerHTML = ' &#10004';
    secure++;
  }
  else
  {
    document.getElementById('emailConstraint').innerHTML = '';
  }

  if(password.match(/[0-9]/))
  {
      document.getElementById('numberConstraint').innerHTML = ' &#10004';
      secure++;
  }
  else
  {
      document.getElementById('numberConstraint').innerHTML = '';
  }
  if(password.match(/^[A-Za-z0-9@_.-]+$/))
    {  
        document.getElementById('characterConstraint').innerHTML = ' &#10004';
        secure++;
    }
    else
    {
      document.getElementById('characterConstraint').innerHTML = '';
    }
    if(password.match(/[A-Z]/))
    {
      document.getElementById('uppercaseConstraint').innerHTML = ' &#10004';
      secure++;

    }
    else
    {
      document.getElementById('uppercaseConstraint').innerHTML = '';
    }
    if(password.match(/[a-z]/))
    {
      document.getElementById('lowercaseConstraint').innerHTML = ' &#10004';
      secure++;

    }
    else
    {
      document.getElementById('lowercaseConstraint').innerHTML = '';
    }

    if(password.length==0)
      {
        document.getElementById('security-message').innerHTML = '';
        secure = 0;
      }
    else if (secure<=3)
    {
      document.getElementById('security-message').innerHTML = 'Weak';
      document.getElementById('security-message').style.color = "red";
  
    }  
    else
    {
      document.getElementById('security-message').innerHTML = 'Strong';
      document.getElementById('security-message').style.color = 'green';

    }
    console.log(document.getElementById('security-value').value);
    document.getElementById('security-value').value = secure;
   

 
}

function confirmPassword()
{
  var password = document.getElementById('passwordInput').value;
  var confirmPassword = document.getElementById('confirmPasswordInput').value;
  if(password!=confirmPassword)
  {
    document.getElementById("matchPassword").innerHTML = "Passwords Do Not Match";
    document.getElementById("matchPassword").style.color= "red";
    document.getElementById("matchPassword").style.marginLeft= "15%";
    
  }
  else  
  {
    document.getElementById("matchPassword").innerHTML = "Passwords Match";
    document.getElementById("matchPassword").style.color= "green";
    document.getElementById("matchPassword").style.marginLeft= "20%";
  }
}

</script>
      
</body>

</html>